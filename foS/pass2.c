#include <string.h>#include<stdlib.h>void main(){ char opcode[10],mnemonic[3],operand[10],label[10],code[10],l[10],finalAddress[10],locctr[10],lCheck[10],aCheck[10],newStr[100],temp[10]="^",temp2[10];int start,length,totalLen = 0;FILE *fin,*fop,*fp1,*fsym,*fp2;fin=fopen("pass1.txt","r");fop=fopen("optab.txt","r");fsym=fopen("symtab.txt","r");fp1=fopen("final.txt","w");fp2=fopen("len.txt","r");fscanf(fin,"%s%s%s",label,opcode,finalAddress);if(strcmp(opcode,"START")==0){ start=atoi(operand);fprintf(fp1,"H^");fprintf(fp1,"%s^00%s^",label,finalAddress);fscanf(fp2,"%s",l);fprintf(fp1,"%s\n",l);fprintf(fp1,"T^%s^",finalAddress);while(strcmp(opcode,"END")!=0){ fscanf(fin,"%s\t%s\t%s\t%s\n",locctr,label,opcode,operand);rewind(fop);while(!feof(fop)){ fscanf(fop,"%s%s",code,mnemonic);if(strcmp(opcode,code)==0){ strcat(newStr,mnemonic);rewind(fsym);while(!feof(fsym)){ fscanf(fsym,"%s%s",lCheck,aCheck);if(strcmp(lCheck,operand)==0){ strcat(newStr,aCheck);strcat(newStr,temp);totalLen+= 3;break;}}break;}}if(strcmp(opcode,"WORD")==0){ strcat(newStr,"00000");strcat(newStr,operand);strcat(newStr,temp);totalLen+= 3;}else if(strcmp(opcode,"BYTE")==0){totalLen+= 1;temp2[0] = operand[2];temp2[1] = operand[3];strcat(newStr,temp2);}}fprintf(fp1,"%x^%s",totalLen,newStr);fprintf(fp1,"\nE^00%s",finalAddress);}fclose(fin);fclose(fop);fclose(fp1);fclose(fp2);fclose(fsym);printf("Works!\n");}